<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "=//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace = "web.shoppingmall.mapper.ProductMapper">
	<insert id="productRegister">
		<selectKey keyProperty="p_num" resultType="String" order="BEFORE">
			<![CDATA[
				SELECT
				    'p'
				    || to_char(sysdate, 'YYYYMMDD')
				    || substr(p_seq.NEXTVAL + 10000, 2)
				FROM
				    dual
    		]]>
		</selectKey>
		<![CDATA[
			INSERT INTO product VALUES (
			    #{p_num},
			    #{p_name},
			    #{p_stat},
			    #{p_stock},
			    #{p_price},
			    #{deliv_fee},
			    #{s_num},
			    #{manufac_num},
			    #{category_num},
			    #{reg_date},
			    #{up_date}
			)		
		]]>
	</insert>
		
	<select id="productDisplay" resultType="web.shoppingmall.domain.ProductVO">
		SELECT
		    *
		FROM
		    product
		WHERE
		    p_num = #{p_num}
	</select>
</mapper>
